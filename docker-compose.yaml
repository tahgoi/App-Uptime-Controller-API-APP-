version: '3.8'

services:
  backend-api:
    build: .
    container_name: process_api
    command: python api.py
    ports:
      - "8520:8520"
    volumes:
      # This maps your local folder to the container so you can edit code live
      - .:/app
    # Note: Volume mounting D:\myApps inside the container would be required here 
    # if you wanted it to actually access the .bat files!

  frontend-dashboard:
    build: .
    container_name: process_dashboard
    # Panel needs to bind to 0.0.0.0 in Docker, and we allow all websocket origins for local dev
    command: panel serve app.py --port 8510 --address 0.0.0.0 --allow-websocket-origin="*"
    ports:
      - "8510:8510"
    volumes:
      - .:/app
    depends_on:
      - backend-api